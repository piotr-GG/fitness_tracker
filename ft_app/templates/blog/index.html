{%extends 'base.html' %}

{% block head %}
<title>Blog</title>
{% endblock %}

{% block body %}
{% if g.user and g.user.is_moderator %}
    <a class="action" href="{{ url_for('blog.create') }}">New post</a>
{% else %}
   <h2>You cannot create anything!</h2>
{% endif %}
<div class="content">
    <h1>Welcome to the blog!</h1>
    {% if posts %}
        {% for post in posts %}
            <article class="post">
                <header>
                    <div>
                        <h1>{{ post.title }}</h1>
                        <div class="about">by {{ post.user_id }} on {{ post.date.strftime('%Y-%m-%d') }}</div>
                    </div>
                </header>
                <p class="body">{{ post.body }}</p>
            </article>
            {% if not loop.last %}
                <hr>
            {% endif %}
        {% endfor %}
    {% else %}
        <h2>There are no blog posts. Please add something!</h2>
    {% endif %}
</div>
{% endblock %}